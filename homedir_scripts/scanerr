#!/bin/bash
set +H
echo "--- Searching for various errors in all error logs: This may take a while! ---"
scan(){
  grep --binary-files=text -Ei "${ERRORS}" /test/*/*/*.err /data/*/*/*.err /test/*/*/*/*.err /data/*/*/*/*.err /test/*/*/*/*/*.err /data/*/*/*/*/*.err 2>/dev/null
}
ERRORS='Incorrect information in file|Table.*contains.*user defined columns in.*but|Unknown column.*in|Failed to read from the|Table.*doesn.t exist in engine|Index.*has.*columns unique inside.*but|indexes inside.*which is different from the number of indexes|is marked as crashed|got error.*when reading table|got error.*from storage engine'
scan
echo "------------------------------------------------------------------------------"
