SET sql_mode='';
INSTALL PLUGIN Spider SONAME 'ha_spider.so';
SET optimizer_trace=1;
CREATE TABLE t1 (c INT, PRIMARY KEY(c)) ENGINE=Spider;
CREATE TABLE t2 (c INT) ENGINE=Spider;
XA START 'a';
SELECT * FROM t2;
SET GLOBAL table_open_cache=10;
INSERT INTO t1 VALUES (0);
INSERT INTO t2 VALUES (0);
SELECT SLEEP(3);
INSERT INTO t1 VALUES (0);

INSTALL PLUGIN Spider SONAME 'ha_spider.so';
SET SESSION default_storage_engine=Spider;
CREATE TABLE t2 (c1 VARCHAR(100)) ENGINE=Spider ROW_FORMAT=COMPRESSED;
CREATE TABLE t1 (id INT NULL, DATA INT NULL, KEY(id));
BEGIN;
SELECT 1 FROM t1 WHERE EXISTS (SELECT * FROM t2 WHERE c1=10);
SET GLOBAL table_open_cache=1000;
SELECT 1 FROM t1;
SET profiling=1;
SELECT 1 FROM t2 WHERE c2 LIKE '%a%' UNION SELECT * FROM t2 WHERE c2 LIKE '%e%';
SELECT SLEEP(1);
INSERT INTO t1 VALUES (1, 1);
