CREATE GLOBAL TEMPORARY TABLE t (c INT) ON COMMIT DELETE ROWS;
SET pseudo_slave_mode=1;
LOCK TABLES t WRITE;
INSERT INTO t VALUES (1);
TRUNCATE t;
CREATE OR REPLACE GLOBAL TEMPORARY TABLE t (t TEXT);

SET sql_mode='';
CREATE GLOBAL TEMPORARY TABLE t1 (c INT) ON COMMIT PRESERVE ROWS;
CREATE GLOBAL TEMPORARY TABLE t2 (d INT KEY) ON COMMIT PRESERVE ROWS;
SET pseudo_slave_mode=1;
TRUNCATE t2;
DROP TABLE t2;
ALTER TABLE t1 ADD e INT;
LOCK TABLE t1 WRITE;
TRUNCATE t1;
SELECT * FROM t;
CREATE GLOBAL TEMPORARY TABLE t1 (c INT) CONNECTION='srv/t1' ENGINE=Federated ON COMMIT DELETE ROWS;
TRUNCATE t;
CREATE OR REPLACE GLOBAL TEMPORARY TABLE t1 (f TEXT);
